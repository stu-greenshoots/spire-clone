* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: 'Segoe UI', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: #1a1a2e;
  color: white;
}

#root {
  width: 100%;
  height: 100%;
  max-width: 100%;
  margin: 0;
  padding: 0;
}

.game-container {
  width: 100%;
  height: 100vh;
  height: 100dvh;
  display: flex;
  flex-direction: column;
  background: radial-gradient(ellipse at center top, #2a2a4e 0%, #1a1a2e 50%, #12121f 100%);
  overflow: hidden;
}

/* Button reset */
button {
  font-family: inherit;
  border: none;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  transition: all 0.2s ease;
}

button:hover {
  transform: translateY(-2px);
  filter: brightness(1.1);
}

button:active {
  transform: scale(0.98) translateY(0);
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #252538;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #555 0%, #333 100%);
  border-radius: 4px;
  border: 1px solid #444;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #666 0%, #444 100%);
}

/* Prevent text selection in game */
.game-container {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Safe area support for notched phones */
@supports (padding: env(safe-area-inset-bottom)) {
  .game-container {
    padding-bottom: env(safe-area-inset-bottom);
    padding-top: env(safe-area-inset-top);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

/* ==================== ANIMATIONS ==================== */

/* Card glow animation */
@keyframes cardGlow {
  0% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5), inset 0 0 5px rgba(255, 215, 0, 0.1); }
  50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), inset 0 0 15px rgba(255, 215, 0, 0.2); }
  100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5), inset 0 0 5px rgba(255, 215, 0, 0.1); }
}

/* Damage shake animation */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10% { transform: translateX(-8px) rotate(-1deg); }
  30% { transform: translateX(8px) rotate(1deg); }
  50% { transform: translateX(-6px) rotate(-0.5deg); }
  70% { transform: translateX(6px) rotate(0.5deg); }
  90% { transform: translateX(-3px); }
}

/* Healing pulse animation */
@keyframes pulse {
  0% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.05); filter: brightness(1.3); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Enemy idle breathing animation */
@keyframes breathe {
  0%, 100% { transform: scale(1) translateY(0); }
  50% { transform: scale(1.02) translateY(-2px); }
}

/* Float animation for relics and icons */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* Glow pulse for important elements */
@keyframes glowPulse {
  0%, 100% { filter: drop-shadow(0 0 3px currentColor); }
  50% { filter: drop-shadow(0 0 10px currentColor); }
}

/* Upgrade glow pulse for upgradeable cards at rest site */
@keyframes upgradeGlow {
  0%, 100% { box-shadow: 0 0 6px rgba(255, 170, 60, 0.3); border-color: rgba(255, 170, 60, 0.5); }
  50% { box-shadow: 0 0 14px rgba(255, 170, 60, 0.6), 0 0 4px rgba(255, 215, 0, 0.3); border-color: rgba(255, 170, 60, 0.8); }
}

/* Fade in animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Slide up animation */
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Card play animation */
@keyframes cardPlay {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2) translateY(-30px); opacity: 0.8; }
  100% { transform: scale(0.5) translateY(-60px); opacity: 0; }
}

/* Damage number float */
@keyframes damageFloat {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  20% { opacity: 1; transform: translateY(-10px) scale(1.3); }
  100% { opacity: 0; transform: translateY(-60px) scale(0.8); }
}

/* Block number float */
@keyframes blockFloat {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  20% { opacity: 1; transform: translateY(-8px) scale(1.2); }
  100% { opacity: 0; transform: translateY(-50px) scale(0.8); }
}

/* Heal number float */
@keyframes healFloat {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  20% { opacity: 1; transform: translateY(-5px) scale(1.15); }
  100% { opacity: 0; transform: translateY(-45px) scale(0.9); }
}

/* Enemy hit flash */
@keyframes enemyHit {
  0% { filter: brightness(1); transform: translateX(0); }
  10% { filter: brightness(2) saturate(0.5); transform: translateX(-8px); }
  20% { filter: brightness(1.5); transform: translateX(6px); }
  30% { filter: brightness(1.2); transform: translateX(-4px); }
  40% { filter: brightness(1.1); transform: translateX(2px); }
  50% { filter: brightness(1); transform: translateX(0); }
  100% { filter: brightness(1); transform: translateX(0); }
}

/* Enemy death */
@keyframes enemyDeath {
  0% { opacity: 1; transform: scale(1) rotate(0); filter: brightness(1); }
  30% { opacity: 1; transform: scale(1.1) rotate(-3deg); filter: brightness(2); }
  100% { opacity: 0; transform: scale(0.3) rotate(15deg) translateY(30px); filter: brightness(0.5); }
}

/* Card fly to target */
@keyframes cardFlyToEnemy {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  40% { transform: translateY(-100px) scale(1.1); opacity: 1; }
  100% { transform: translateY(-200px) scale(0.5); opacity: 0; }
}

/* Block shield appear */
@keyframes blockAppear {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.3); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* Enemy block gained animation (VP-11) */
@keyframes enemyBlockAppear {
  0% { transform: scale(0.3); opacity: 0; }
  40% { transform: scale(1.2); opacity: 1; }
  70% { transform: scale(0.95); }
  100% { transform: scale(1); opacity: 1; }
}

/* Shield icon pulse when enemy gains block (VP-11) */
@keyframes shieldIconPulse {
  0% { transform: scale(0.5) rotate(-10deg); opacity: 0; }
  30% { transform: scale(1.4) rotate(5deg); opacity: 1; }
  60% { transform: scale(1.1) rotate(-2deg); }
  100% { transform: scale(1) rotate(0); opacity: 1; }
}

/* Enemy block gained glow class (VP-11) */
.enemy-block-gained {
  animation: enemyBlockAppear 0.5s ease-out;
}

/* Player hit flash */
@keyframes playerHit {
  0%, 100% { filter: brightness(1); }
  25% { filter: brightness(0.5) sepia(1) saturate(5) hue-rotate(-30deg); }
  50% { filter: brightness(1.5); }
  75% { filter: brightness(0.8) sepia(0.5) saturate(3) hue-rotate(-20deg); }
}

/* Heal pulse effect */
@keyframes healPulse {
  0% { box-shadow: 0 0 0 0 rgba(68, 255, 68, 0.7); }
  50% { box-shadow: 0 0 20px 10px rgba(68, 255, 68, 0.4); }
  100% { box-shadow: 0 0 0 0 rgba(68, 255, 68, 0); }
}

/* Status applied effect */
@keyframes statusApplied {
  0% { transform: scale(0.5); opacity: 0; }
  50% { transform: scale(1.2); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}

/* Energy spent flash */
@keyframes energySpent {
  0% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(0.9); filter: brightness(1.5); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Card draw animation */
@keyframes cardDraw {
  0% { transform: translateX(-100px) translateY(50px) rotate(-20deg) scale(0.5); opacity: 0; }
  50% { transform: translateX(-20px) translateY(-10px) rotate(-5deg) scale(1.1); opacity: 1; }
  100% { transform: translateX(0) translateY(0) rotate(0) scale(1); opacity: 1; }
}

/* Screen fade transition */
@keyframes screenFadeIn {
  0% { opacity: 0; transform: scale(0.98); }
  100% { opacity: 1; transform: scale(1); }
}

/* Combat start zoom */
@keyframes combatStart {
  0% { opacity: 0; transform: scale(1.1); filter: blur(5px); }
  100% { opacity: 1; transform: scale(1); filter: blur(0); }
}

/* End turn button pulse when ready */
@keyframes endTurnPulse {
  0%, 100% {
    box-shadow: 0 4px 15px rgba(170, 32, 32, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
    transform: scale(1);
  }
  50% {
    box-shadow: 0 4px 25px rgba(255, 100, 100, 0.7), inset 0 1px 0 rgba(255, 255, 255, 0.3);
    transform: scale(1.02);
  }
}

/* Card hover lift */
@keyframes cardHoverLift {
  0% { transform: translateY(0); }
  100% { transform: translateY(-15px) scale(1.05); }
}

/* Victory screen celebration */
@keyframes victoryPulse {
  0%, 100% { transform: scale(1); filter: brightness(1); }
  50% { transform: scale(1.05); filter: brightness(1.2); }
}

/* Reward card reveal */
@keyframes rewardCardReveal {
  0% { transform: rotateY(90deg) scale(0.8); opacity: 0; }
  50% { transform: rotateY(-10deg) scale(1.05); opacity: 1; }
  100% { transform: rotateY(0) scale(1); opacity: 1; }
}

/* Boss entrance */
@keyframes bossEntrance {
  0% { transform: scale(2) rotate(-5deg); opacity: 0; filter: blur(10px); }
  50% { transform: scale(1.1) rotate(2deg); opacity: 1; filter: blur(0); }
  100% { transform: scale(1) rotate(0); opacity: 1; }
}

/* Intent indicator pulse */
@keyframes intentPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.15); }
}

/* Status effect shimmer */
@keyframes shimmer {
  0% { background-position: -100% 0; }
  100% { background-position: 100% 0; }
}

/* Energy orb glow */
@keyframes energyGlow {
  0%, 100% {
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.6),
                inset 0 0 10px rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.9),
                inset 0 0 15px rgba(255, 255, 255, 0.4);
  }
}

/* Victory celebration */
@keyframes celebrate {
  0%, 100% { transform: rotate(-5deg) scale(1); }
  25% { transform: rotate(5deg) scale(1.1); }
  50% { transform: rotate(-3deg) scale(1.05); }
  75% { transform: rotate(3deg) scale(1.08); }
}

/* HP bar drain */
@keyframes hpDrain {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.5); }
  100% { filter: brightness(1); }
}

/* Sparkle effect */
@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1); }
}

/* Rotating border for rare items */
@keyframes rotateBorder {
  0% { border-image-source: linear-gradient(0deg, #FFD700, #FF6B35, #FFD700); }
  33% { border-image-source: linear-gradient(120deg, #FFD700, #FF6B35, #FFD700); }
  66% { border-image-source: linear-gradient(240deg, #FFD700, #FF6B35, #FFD700); }
  100% { border-image-source: linear-gradient(360deg, #FFD700, #FF6B35, #FFD700); }
}

/* ==================== ENHANCED ANIMATIONS ==================== */

/* Smooth card hover with 3D effect */
@keyframes cardHover3D {
  0% { transform: translateY(0) rotateX(0) scale(1); }
  100% { transform: translateY(-20px) rotateX(-5deg) scale(1.08); }
}

/* Card drag animation */
@keyframes cardDragging {
  0%, 100% { box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4); }
  50% { box-shadow: 0 10px 40px rgba(255, 215, 0, 0.6); }
}

/* Performance optimized dragging card */
.card.dragging {
  will-change: transform;
  pointer-events: none;
}

/* Card drop target highlight */
@keyframes dropTargetPulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(255, 100, 100, 0.3);
    border-color: rgba(255, 100, 100, 0.5);
  }
  50% {
    box-shadow: 0 0 40px rgba(255, 100, 100, 0.6);
    border-color: rgba(255, 100, 100, 0.8);
  }
}

/* Smooth path drawing animation */
@keyframes drawPath {
  from { stroke-dashoffset: 100; }
  to { stroke-dashoffset: 0; }
}

/* Path glow animation */
@keyframes pathGlow {
  0%, 100% {
    filter: drop-shadow(0 0 2px currentColor);
    opacity: 0.6;
  }
  50% {
    filter: drop-shadow(0 0 6px currentColor);
    opacity: 1;
  }
}

/* Enhanced enemy breathing */
@keyframes enemyBreathe {
  0%, 100% {
    transform: scale(1) translateY(0);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.03) translateY(-3px);
    filter: brightness(1.05);
  }
}

/* Boss dramatic entrance */
@keyframes bossEntranceDramatic {
  0% {
    transform: scale(3) rotate(-10deg);
    opacity: 0;
    filter: blur(20px) brightness(2);
  }
  40% {
    transform: scale(1.2) rotate(5deg);
    opacity: 1;
    filter: blur(0) brightness(1.5);
  }
  70% {
    transform: scale(0.95) rotate(-2deg);
    filter: brightness(1);
  }
  100% {
    transform: scale(1) rotate(0);
    filter: brightness(1);
  }
}

/* Health bar smooth fill */
@keyframes healthBarFill {
  0% { width: 0%; }
  100% { width: var(--hp-percent, 100%); }
}

/* Damage taken screen shake */
@keyframes screenShake {
  0%, 100% { transform: translateX(0); }
  10% { transform: translateX(-5px); }
  20% { transform: translateX(5px); }
  30% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  50% { transform: translateX(-2px); }
  60% { transform: translateX(2px); }
  70% { transform: translateX(-1px); }
  80% { transform: translateX(1px); }
}

/* Turn indicator pulse */
@keyframes turnPulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
  }
  50% {
    transform: scale(1.05);
    box-shadow: 0 0 25px rgba(255, 215, 0, 0.6);
  }
}

/* Relic pickup animation */
@keyframes relicPickup {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.3) rotate(10deg);
    opacity: 1;
  }
  100% {
    transform: scale(1) rotate(0);
    opacity: 1;
  }
}

/* Gold gain animation */
@keyframes goldGain {
  0% {
    transform: scale(0.5) translateY(20px);
    opacity: 0;
  }
  50% {
    transform: scale(1.2) translateY(-5px);
    opacity: 1;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

/* Map node connection animation */
@keyframes nodeConnectGlow {
  0% { stroke-opacity: 0.3; }
  50% { stroke-opacity: 0.8; }
  100% { stroke-opacity: 0.3; }
}

/* Smooth transition for all interactive elements */
.interactive {
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 0.2s ease,
              filter 0.2s ease;
}

/* Card in hand fan effect */
@keyframes cardFanIn {
  0% {
    transform: translateX(-50px) translateY(100px) rotate(-30deg) scale(0.5);
    opacity: 0;
  }
  100% {
    transform: translateX(0) translateY(0) rotate(0) scale(1);
    opacity: 1;
  }
}

/* Scroll hint animation for large hands */
@keyframes scrollHint {
  0%, 100% {
    opacity: 0.3;
    transform: translateY(-50%) translateX(0);
  }
  50% {
    opacity: 0.8;
    transform: translateY(-50%) translateX(-5px);
  }
}

/* Tooltip fade in animation (UX-02) */
@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Responsive font sizes */
@media (max-width: 360px) {
  html {
    font-size: 14px;
  }
}

@media (min-width: 768px) {
  html {
    font-size: 18px;
  }
}

/* Landscape adjustments */
@media (orientation: landscape) and (max-height: 500px) {
  .game-container {
    flex-direction: row;
    flex-wrap: wrap;
  }
}

/* Glass morphism effect class */
.glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Neon text effect */
.neon-text {
  text-shadow:
    0 0 5px currentColor,
    0 0 10px currentColor,
    0 0 20px currentColor;
}

/* Card type color variables */
:root {
  --attack-color: #c41e3a;
  --attack-gradient: linear-gradient(135deg, #8B0000 0%, #c41e3a 50%, #8B0000 100%);
  --skill-color: #0078d4;
  --skill-gradient: linear-gradient(135deg, #004488 0%, #0078d4 50%, #004488 100%);
  --power-color: #d4a017;
  --power-gradient: linear-gradient(135deg, #8B6914 0%, #d4a017 50%, #8B6914 100%);
  --curse-color: #4a0080;
  --curse-gradient: linear-gradient(135deg, #1a0030 0%, #4a0080 50%, #1a0030 100%);
  --status-color: #404040;
  --status-gradient: linear-gradient(135deg, #202020 0%, #404040 50%, #202020 100%);

  /* Rarity colors */
  --common-color: #888888;
  --uncommon-color: #00bfff;
  --rare-color: #ffd700;

  /* UI colors */
  --hp-color: #c41e3a;
  --block-color: #4a90d9;
  --energy-color: #ffd700;
  --gold-color: #ffd700;
}

/* ==================== SCREEN SHAKE EFFECTS ==================== */

.shake-light { animation: shake-light 0.2s ease-in-out; }
.shake-medium { animation: shake-medium 0.2s ease-in-out; }
.shake-heavy { animation: shake-heavy 0.3s ease-in-out; }

@keyframes shake-light {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-2px); }
  75% { transform: translateX(2px); }
}

@keyframes shake-medium {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-5px); }
  40% { transform: translateX(5px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}

@keyframes shake-heavy {
  0%, 100% { transform: translateX(0); }
  10% { transform: translate(-8px, 2px); }
  30% { transform: translate(8px, -2px); }
  50% { transform: translate(-6px, 1px); }
  70% { transform: translate(6px, -1px); }
  90% { transform: translate(-3px, 0); }
}

/* ==================== CARD HOVER GLOW ==================== */

.card:hover:not(.disabled) {
  transform: translateY(-10px) scale(1.05);
  box-shadow: 0 0 20px rgba(100, 200, 255, 0.5);
  transition: all 0.15s ease;
}

/* ==================== DECK VIEWER (UX-03) ==================== */

.deck-viewer-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.85);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s ease;
}

.deck-viewer {
  width: 90%;
  max-width: 700px;
  max-height: 85vh;
  background: linear-gradient(180deg, #252540 0%, #1a1a2e 100%);
  border: 1px solid #444;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.deck-viewer-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid #333;
}

.deck-viewer-header h2 {
  margin: 0;
  font-size: 18px;
  color: #ddd;
  letter-spacing: 1px;
}

.deck-viewer-header .close-btn {
  width: 30px;
  height: 30px;
  background: rgba(255, 50, 50, 0.2);
  border: 1px solid rgba(255, 50, 50, 0.4);
  border-radius: 50%;
  color: #ff6666;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: unset;
  min-width: unset;
  padding: 0;
}

.deck-viewer-header .close-btn:hover {
  background: rgba(255, 50, 50, 0.4);
}

.deck-viewer-controls {
  padding: 10px 16px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  border-bottom: 1px solid #222;
}

.sort-controls,
.filter-controls {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.sort-controls span {
  font-size: 12px;
  color: #888;
}

.deck-viewer-controls button {
  padding: 4px 10px;
  font-size: 11px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid #444;
  border-radius: 4px;
  color: #aaa;
  min-height: unset;
  min-width: unset;
}

.deck-viewer-controls button.active {
  background: rgba(100, 150, 255, 0.2);
  border-color: #6699ff;
  color: #99bbff;
}

.deck-viewer-controls button:hover {
  background: rgba(255, 255, 255, 0.1);
}

.deck-card-grid {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 10px;
  align-content: start;
}

.deck-card-item {
  position: relative;
  padding: 10px 8px 8px;
  border-radius: 8px;
  border: 1px solid #333;
  background: rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  gap: 4px;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.deck-card-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.deck-card-item.card-type-attack {
  border-color: var(--attack-color);
  background: linear-gradient(180deg, rgba(196, 30, 58, 0.1) 0%, rgba(0, 0, 0, 0.3) 100%);
}

.deck-card-item.card-type-skill {
  border-color: var(--skill-color);
  background: linear-gradient(180deg, rgba(0, 120, 212, 0.1) 0%, rgba(0, 0, 0, 0.3) 100%);
}

.deck-card-item.card-type-power {
  border-color: var(--power-color);
  background: linear-gradient(180deg, rgba(212, 160, 23, 0.1) 0%, rgba(0, 0, 0, 0.3) 100%);
}

.deck-card-item.card-type-curse,
.deck-card-item.card-type-status {
  border-color: var(--curse-color);
  background: linear-gradient(180deg, rgba(74, 0, 128, 0.1) 0%, rgba(0, 0, 0, 0.3) 100%);
}

.deck-card-cost {
  position: absolute;
  top: -6px;
  left: -6px;
  width: 22px;
  height: 22px;
  background: radial-gradient(circle at 30% 30%, #555 0%, #222 70%);
  border: 2px solid #888;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: bold;
  color: #ffd700;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
}

.deck-card-name {
  font-size: 11px;
  font-weight: bold;
  color: #eee;
  text-align: center;
  padding-top: 2px;
}

.deck-card-desc {
  font-size: 9px;
  color: #aaa;
  text-align: center;
  line-height: 1.3;
}

.deck-relics-section {
  padding: 10px 16px;
  border-top: 1px solid #222;
}

.deck-relics-section h3 {
  margin: 0 0 8px;
  font-size: 14px;
  color: #ccc;
}

.deck-relics-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.deck-relic-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid #444;
  border-radius: 6px;
  cursor: default;
  transition: background 0.15s ease;
}

.deck-relic-item:hover {
  background: rgba(255, 255, 255, 0.1);
}

.relic-emoji {
  font-size: 16px;
}

.relic-name {
  font-size: 11px;
  color: #ddd;
}

.run-stats-section {
  padding: 10px 16px;
  border-top: 1px solid #222;
}

.run-stats-section h3 {
  margin: 0 0 8px;
  font-size: 14px;
  color: #ccc;
}

.stats-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid #333;
  border-radius: 6px;
  min-width: 80px;
}

.stat-label {
  font-size: 9px;
  color: #888;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-value {
  font-size: 16px;
  font-weight: bold;
  color: #ffd700;
}

/* ==================== TUTORIAL (UX-04) ==================== */

.tutorial-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 2000;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding-bottom: 100px;
  pointer-events: none;
  animation: fadeIn 0.3s ease;
}

.tutorial-hint {
  background: linear-gradient(180deg, #1e2a3e 0%, #141e2e 100%);
  border: 1px solid #4488cc;
  border-radius: 10px;
  padding: 16px 20px;
  max-width: 400px;
  box-shadow: 0 8px 30px rgba(0, 80, 180, 0.3), 0 0 15px rgba(68, 136, 204, 0.2);
  pointer-events: auto;
  animation: slideUp 0.3s ease;
}

.tutorial-hint p {
  margin: 0 0 12px;
  font-size: 14px;
  color: #dde8f5;
  line-height: 1.5;
}

.tutorial-buttons {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

.tutorial-buttons button {
  padding: 6px 16px;
  font-size: 12px;
  border-radius: 5px;
  background: rgba(68, 136, 204, 0.3);
  border: 1px solid #4488cc;
  color: #aaccff;
  font-weight: 600;
  min-height: unset;
  min-width: unset;
}

.tutorial-buttons button:hover {
  background: rgba(68, 136, 204, 0.5);
}

.tutorial-buttons .tutorial-skip {
  background: rgba(255, 255, 255, 0.05);
  border-color: #555;
  color: #888;
}

.tutorial-buttons .tutorial-skip:hover {
  background: rgba(255, 255, 255, 0.1);
  color: #aaa;
}

/* ==================== CARD FRAME & TYPE VISUAL SYSTEM (GD-02) ==================== */

.card-frame {
  border: 2px solid;
  border-radius: 10px;
  position: relative;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Attack cards - red tinted frame */
.card-frame--attack {
  border-color: rgba(200, 50, 50, 0.7);
}
.card-frame--attack:hover:not([style*="not-allowed"]) {
  box-shadow: 0 0 12px rgba(200, 50, 50, 0.4), 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Skill cards - blue tinted frame */
.card-frame--skill {
  border-color: rgba(50, 100, 200, 0.7);
}
.card-frame--skill:hover:not([style*="not-allowed"]) {
  box-shadow: 0 0 12px rgba(50, 100, 200, 0.4), 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Power cards - gold/yellow tinted frame */
.card-frame--power {
  border-color: rgba(200, 170, 50, 0.7);
}
.card-frame--power:hover:not([style*="not-allowed"]) {
  box-shadow: 0 0 12px rgba(200, 170, 50, 0.4), 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Curse cards - dark purple frame */
.card-frame--curse {
  border-color: rgba(120, 40, 160, 0.6);
}
.card-frame--curse:hover:not([style*="not-allowed"]) {
  box-shadow: 0 0 10px rgba(120, 40, 160, 0.3), 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Status cards - gray frame */
.card-frame--status {
  border-color: rgba(100, 100, 100, 0.6);
}
.card-frame--status:hover:not([style*="not-allowed"]) {
  box-shadow: 0 0 8px rgba(100, 100, 100, 0.3), 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Upgraded card glow */
.card-frame--upgraded {
  box-shadow: 0 0 8px rgba(46, 204, 113, 0.4), inset 0 0 6px rgba(46, 204, 113, 0.1);
}
.card-frame--upgraded.card-frame--attack {
  box-shadow: 0 0 8px rgba(46, 204, 113, 0.4), 0 0 4px rgba(200, 50, 50, 0.3);
}
.card-frame--upgraded.card-frame--skill {
  box-shadow: 0 0 8px rgba(46, 204, 113, 0.4), 0 0 4px rgba(50, 100, 200, 0.3);
}
.card-frame--upgraded.card-frame--power {
  box-shadow: 0 0 8px rgba(46, 204, 113, 0.4), 0 0 4px rgba(200, 170, 50, 0.3);
}

/* Cost orb type tinting */
.card-cost-orb {
  transition: box-shadow 0.2s ease;
}
.card-cost-orb--attack {
  border-color: rgba(200, 50, 50, 0.6) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), 0 0 4px rgba(200, 50, 50, 0.3), inset 0 -2px 4px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.1);
}
.card-cost-orb--skill {
  border-color: rgba(50, 100, 200, 0.6) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), 0 0 4px rgba(50, 100, 200, 0.3), inset 0 -2px 4px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.1);
}
.card-cost-orb--power {
  border-color: rgba(200, 170, 50, 0.6) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), 0 0 4px rgba(200, 170, 50, 0.3), inset 0 -2px 4px rgba(0, 0, 0, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.1);
}

/* Rarity indicator */
.card-rarity-indicator {
  transition: opacity 0.2s ease;
}
.card-rarity--common { border-bottom-color: #95a5a6; }
.card-rarity--uncommon { border-bottom-color: #3498db; }
.card-rarity--rare { border-bottom-color: #f1c40f; }

/* ==================== KEYWORD TOOLTIPS & DAMAGE PREVIEW (UX-02) ==================== */

.keyword-highlight { text-decoration: underline dotted; cursor: help; }

.tooltip-wrapper { position: relative; display: inline; }

.tooltip-popup {
  position: absolute;
  background: #252540;
  border: 1px solid #555;
  padding: 8px;
  border-radius: 4px;
  z-index: 100;
  font-size: 12px;
  max-width: 200px;
  white-space: normal;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 4px;
  color: #ddd;
  text-align: left;
  pointer-events: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  line-height: 1.4;
}

.damage-preview { color: #e74c3c; font-weight: bold; font-size: 11px; margin-top: 2px; }

/* ===== MOBILE RESPONSIVENESS ===== */

/* Base mobile layout */
@media (max-width: 768px) {
  .game-container {
    padding: 4px;
    font-size: 14px;
  }

  /* Combat Screen */
  .combat-screen {
    flex-direction: column;
    gap: 8px;
  }

  .enemy-area {
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
    min-height: 120px;
  }

  .enemy-container {
    min-width: 80px;
    max-width: 120px;
  }

  .enemy-hp-bar {
    height: 8px;
  }

  .enemy-intent {
    font-size: 12px;
  }

  /* Card hand */
  .hand-area {
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    gap: 4px;
    padding: 8px 4px;
    justify-content: flex-start;
    min-height: 140px;
  }

  .card {
    min-width: 90px;
    max-width: 110px;
    min-height: 130px;
    font-size: 11px;
    flex-shrink: 0;
    touch-action: manipulation;
  }

  .card-name {
    font-size: 11px;
  }

  .card-description {
    font-size: 10px;
    line-height: 1.2;
  }

  .card-cost {
    width: 24px;
    height: 24px;
    font-size: 14px;
  }

  /* Buttons - minimum touch targets */
  button, .btn, .action-btn {
    min-height: 44px;
    min-width: 44px;
    padding: 10px 16px;
    font-size: 14px;
    touch-action: manipulation;
  }

  .end-turn-btn {
    min-height: 48px;
    padding: 12px 24px;
    font-size: 16px;
    font-weight: bold;
  }

  /* Player status */
  .player-status-bar {
    flex-wrap: wrap;
    gap: 8px;
    padding: 8px;
  }

  .player-hp {
    font-size: 14px;
  }

  .energy-display {
    font-size: 16px;
  }

  /* Map screen */
  .map-container {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    max-height: 70vh;
  }

  .map-node {
    min-width: 44px;
    min-height: 44px;
    font-size: 18px;
  }

  /* Shop */
  .shop-items {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 8px;
  }

  .shop-item {
    min-height: 44px;
    padding: 8px;
  }

  /* Header */
  .persistent-header {
    flex-wrap: wrap;
    gap: 4px;
    padding: 4px 8px;
    font-size: 12px;
  }

  /* Rewards */
  .reward-options {
    flex-direction: column;
    gap: 8px;
  }

  .reward-card {
    width: 100%;
    max-width: 300px;
  }

  /* Rest site */
  .rest-options {
    flex-direction: column;
    gap: 12px;
  }

  .rest-option {
    min-height: 60px;
    padding: 16px;
  }

  /* Event screen */
  .event-choices {
    flex-direction: column;
    gap: 8px;
  }

  .event-choice {
    min-height: 48px;
    padding: 12px;
  }

  /* Modals and overlays */
  .modal-overlay, .deck-viewer-overlay {
    padding: 8px;
  }

  .modal-content, .deck-viewer {
    max-height: 90vh;
    overflow-y: auto;
    width: 100%;
    max-width: 100%;
  }

  /* Deck viewer */
  .deck-card-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 4px;
  }

  /* Status effects */
  .status-effects {
    flex-wrap: wrap;
    gap: 2px;
    font-size: 11px;
  }

  /* Game over / Victory */
  .game-over-screen, .victory-screen {
    padding: 16px;
  }

  /* Potion slots */
  .potion-slots {
    gap: 4px;
  }

  .potion-slot {
    min-width: 44px;
    min-height: 44px;
  }

  /* Tutorial hints */
  .tutorial-hint {
    max-width: 90%;
    font-size: 14px;
  }
}

/* Small phones (iPhone SE, etc) */
@media (max-width: 375px) {
  .card {
    min-width: 75px;
    max-width: 90px;
    min-height: 110px;
    font-size: 10px;
  }

  .card-cost {
    width: 20px;
    height: 20px;
    font-size: 12px;
  }

  .enemy-container {
    min-width: 60px;
    max-width: 90px;
  }

  .hand-area {
    min-height: 120px;
  }

  button, .btn, .action-btn {
    padding: 8px 12px;
    font-size: 13px;
  }
}

/* Tablet */
@media (min-width: 769px) and (max-width: 1024px) {
  .hand-area {
    gap: 6px;
  }

  .card {
    min-width: 100px;
    max-width: 130px;
  }
}

/* Touch device overrides */
@media (hover: none) and (pointer: coarse) {
  /* Remove hover effects that won't work on touch */
  .card:hover {
    transform: none;
  }

  .card.selected {
    transform: translateY(-10px);
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
  }

  /* Make clickable items more obvious */
  .map-node:active,
  .card:active,
  button:active {
    opacity: 0.7;
    transform: scale(0.95);
  }

  /* Larger touch targets for interactive elements */
  .map-node {
    min-width: 48px;
    min-height: 48px;
  }
}

/* Landscape mobile */
@media (max-height: 500px) and (orientation: landscape) {
  .combat-screen {
    flex-direction: row;
    gap: 4px;
  }

  .hand-area {
    min-height: 100px;
    max-height: 130px;
  }

  .card {
    min-height: 100px;
    font-size: 9px;
  }

  .enemy-area {
    min-height: 80px;
  }
}

/* Prevent text selection on game elements */
.card, .map-node, button, .enemy-container, .potion-slot, .relic-item {
  -webkit-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* Smooth scrolling for mobile */
.scrollable {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* ==================== SWIPE HINT (VP-15) ==================== */

/* Hide swipe hint on non-touch devices (devices with hover capability) */
@media (hover: hover) {
  .swipe-hint {
    display: none;
  }
}

/* Defeated enemy styling for victory overlay */
.enemy--defeated {
  opacity: 0.4;
  filter: grayscale(80%) brightness(0.6);
  transform: scale(0.95);
  transition: all 0.3s ease;
}


/* ==================== VICTORY TRANSITION (VP-07) ==================== */

@keyframes victorySlideUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes victoryContentAppear {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.victory-overlay-container {
  animation: fadeIn 0.3s ease-out;
}

.victory-content-panel {
  animation: victorySlideUp 0.4s ease-out 0.1s both;
}

.victory-reward-button {
  animation: victoryContentAppear 0.3s ease-out backwards;
}

.victory-reward-button:nth-child(1) { animation-delay: 0.2s; }
.victory-reward-button:nth-child(2) { animation-delay: 0.3s; }
.victory-reward-button:nth-child(3) { animation-delay: 0.4s; }

/* ==================== UX-13a: Mobile Combat HUD ==================== */

/* Mobile: collapsible header during combat + vertical combat zones */
@media (max-width: 768px) {
  /* During combat, show compact header and hide full rows */
  .persistent-header-container.combat-mode .combat-header-compact {
    display: flex !important;
  }

  .persistent-header-container.combat-mode .header-stats-row,
  .persistent-header-container.combat-mode .header-relics-row,
  .persistent-header-container.combat-mode .header-potions-row {
    display: none !important;
  }

  /* When HUD is expanded during combat, show everything */
  .persistent-header-container.combat-mode.hud-expanded .header-stats-row,
  .persistent-header-container.combat-mode.hud-expanded .header-relics-row,
  .persistent-header-container.combat-mode.hud-expanded .header-potions-row {
    display: flex !important;
  }

  /* Reduce combat screen padding to match compact header (~40px) */
  .combat-screen-container {
    padding-top: 40px !important;
  }

  /* HUD expand button - no hover transform on mobile */
  .hud-expand-btn:hover {
    transform: none !important;
  }

  /* ==================== UX-13b: Mobile Card Fan/Arc ==================== */

  /* Fan container: centered, no scroll, allow overflow for arc */
  .mobile-card-fan {
    overflow: visible !important;
    padding-bottom: 15px !important;
    min-height: 170px !important;
    position: relative;
  }

  /* Each card slot in the fan: overlap via negative margin */
  .mobile-card-slot {
    margin-left: -18px;
    margin-right: -18px;
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), z-index 0s;
    will-change: transform;
  }

  .mobile-card-slot:first-child {
    margin-left: 0;
  }

  .mobile-card-slot:last-child {
    margin-right: 0;
  }

  /* Selected card lifts and enlarges */
  .mobile-card-selected {
    filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.6));
  }

  /* Tap hint bar */
  .mobile-tap-hint {
    text-align: center;
    padding: 4px 8px;
    font-size: 11px;
    color: #FFD700;
    background: rgba(255, 215, 0, 0.08);
    border-top: 1px solid rgba(255, 215, 0, 0.2);
    letter-spacing: 0.5px;
    animation: fadeIn 0.2s ease;
  }
}

