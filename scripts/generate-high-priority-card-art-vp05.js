#!/usr/bin/env node

/**
 * VP-05: High-Priority Card Art Replacement
 *
 * Generates high-quality art for 20 highest-visibility cards:
 *
 * Starter Attack/Defense Cards (8):
 * - strike, strike_silent, strike_defect, strike_watcher
 * - defend, defend_silent, defend_defect, defend_watcher
 *
 * Character Starter Cards (7):
 * - bash: Ironclad starter - Deal 8 damage, Apply Vulnerable 2
 * - neutralize: Silent starter - Deal 3 damage, Apply Weak 1
 * - survivor: Silent starter - Gain 8 Block, Discard 1 card
 * - zap: Defect starter - Channel 1 Lightning
 * - dualcast: Defect starter - Evoke your rightmost Orb twice
 * - eruption: Watcher starter - Deal 9 damage, Enter Wrath
 * - vigilance: Watcher starter - Gain 8 Block, Enter Calm
 *
 * Token/Generated Cards (2):
 * - shiv: Generated by Silent - Deal 4 damage, Exhaust
 * - miracle: Generated by Watcher - Gain 1 Energy, Exhaust
 *
 * Common Cards (3):
 * - anger: Ironclad - Deal 6 damage, Add copy to discard
 * - pommelStrike: Ironclad - Deal 9 damage, Draw 1
 * - ballLightning: Defect - Deal 7 damage, Channel 1 Lightning
 *
 * Target: >10KB per card with detailed art
 *
 * Usage: node scripts/generate-high-priority-card-art-vp05.js
 * Requires: sharp (devDependency)
 */

import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __dirname = path.dirname(fileURLToPath(import.meta.url));
const SIZE = 512; // Canvas size for card art
const OUTPUT_SIZE = 256; // Output size for cards
const NOISE_DENSITY = 350; // Noise elements for texture

// Character color schemes
const CHAR_COLORS = {
  ironclad: { primary: '#aa2222', secondary: '#ff4444', accent: '#ffaa44', dark: '#3a1a1a', darker: '#1a0808' },
  silent: { primary: '#22aa44', secondary: '#44ff66', accent: '#88ff88', dark: '#1a3a1a', darker: '#081a08' },
  defect: { primary: '#2266aa', secondary: '#4488ff', accent: '#66aaff', dark: '#1a2a3a', darker: '#080818' },
  watcher: { primary: '#aa44aa', secondary: '#dd66dd', accent: '#ffaaff', dark: '#3a1a3a', darker: '#180818' },
  neutral: { primary: '#666666', secondary: '#888888', accent: '#aaaaaa', dark: '#2a2a2a', darker: '#1a1a1a' }
};

// Generate noise pattern for textures
function noisePattern(count, bounds, colors, opacityRange, sizeRange = [1, 4]) {
  const parts = [];
  for (let i = 0; i < count; i++) {
    const x = bounds.x + Math.random() * bounds.w;
    const y = bounds.y + Math.random() * bounds.h;
    const r = sizeRange[0] + Math.random() * (sizeRange[1] - sizeRange[0]);
    const color = colors[Math.floor(Math.random() * colors.length)];
    const opacity = opacityRange[0] + Math.random() * (opacityRange[1] - opacityRange[0]);
    parts.push(`<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="${r.toFixed(1)}" fill="${color}" opacity="${opacity.toFixed(2)}" />`);
  }
  return parts;
}

// Generate sparkle effect
function sparkles(cx, cy, count, radius, color) {
  const parts = [];
  for (let i = 0; i < count; i++) {
    const angle = (i / count) * Math.PI * 2;
    const dist = radius * (0.5 + Math.random() * 0.5);
    const x = cx + Math.cos(angle) * dist;
    const y = cy + Math.sin(angle) * dist;
    const size = 1 + Math.random() * 3;
    const opacity = 0.4 + Math.random() * 0.5;
    parts.push(`<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="${size.toFixed(1)}" fill="${color}" opacity="${opacity.toFixed(2)}" />`);
  }
  return parts;
}

// Generate motion lines
function motionLines(x, y, direction, count, length, color) {
  const parts = [];
  const angle = direction * Math.PI / 180;
  for (let i = 0; i < count; i++) {
    const offset = (i - count/2) * 8;
    const perpAngle = angle + Math.PI/2;
    const startX = x + Math.cos(perpAngle) * offset;
    const startY = y + Math.sin(perpAngle) * offset;
    const endX = startX + Math.cos(angle) * length * (0.5 + Math.random() * 0.5);
    const endY = startY + Math.sin(angle) * length * (0.5 + Math.random() * 0.5);
    const opacity = 0.3 + Math.random() * 0.4;
    parts.push(`<line x1="${startX.toFixed(1)}" y1="${startY.toFixed(1)}" x2="${endX.toFixed(1)}" y2="${endY.toFixed(1)}" stroke="${color}" stroke-width="2" opacity="${opacity.toFixed(2)}" stroke-linecap="round" />`);
  }
  return parts;
}

const CARDS = [
  // === STRIKE VARIANTS ===
  {
    id: 'strike',
    name: 'Strike',
    character: 'ironclad',
    description: 'Deal 6 damage',
    buildParts: () => {
      const parts = [];
      // Sword blade
      parts.push('<path d="M 0 -90 L 15 40 L 0 50 L -15 40 Z" fill="#aabbcc" opacity="0.95" />');
      parts.push('<path d="M 0 -85 L 12 35 L 0 43 L -12 35 Z" fill="#ccdde8" opacity="0.9" />');
      parts.push('<path d="M 0 -80 L 0 40" stroke="#ddeef8" stroke-width="2" opacity="0.5" />');
      // Blade edge gleam
      parts.push('<path d="M -10 -60 L 0 -90 L 10 -60" fill="#ffffff" opacity="0.4" />');
      // Guard
      parts.push('<ellipse cx="0" cy="50" rx="35" ry="8" fill="#8a6633" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="48" rx="32" ry="6" fill="#aa8844" opacity="0.85" />');
      // Handle
      parts.push('<rect x="-8" y="55" width="16" height="40" rx="3" fill="#553322" opacity="0.95" />');
      parts.push('<rect x="-6" y="57" width="12" height="36" fill="#664433" opacity="0.85" />');
      // Handle wrapping
      for (let i = 0; i < 4; i++) {
        parts.push(`<rect x="-7" y="${60 + i * 9}" width="14" height="4" fill="#442211" opacity="0.7" />`);
      }
      // Pommel
      parts.push('<ellipse cx="0" cy="98" rx="10" ry="6" fill="#aa8844" opacity="0.95" />');
      // Motion lines
      parts.push(...motionLines(-30, -20, -45, 5, 50, '#ff4444'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -40, y: -90, w: 80, h: 190 },
        ['#556677', '#445566', '#667788', '#aa2222'], [0.08, 0.22], [1, 3]));
      return parts;
    }
  },
  {
    id: 'strike_silent',
    name: 'Strike (Silent)',
    character: 'silent',
    description: 'Deal 6 damage',
    buildParts: () => {
      const parts = [];
      // Dagger blade
      parts.push('<path d="M 0 -75 L 12 20 L 0 30 L -12 20 Z" fill="#aabbcc" opacity="0.95" />');
      parts.push('<path d="M 0 -70 L 9 18 L 0 25 L -9 18 Z" fill="#ccdde8" opacity="0.9" />');
      parts.push('<path d="M 0 -65 L 0 22" stroke="#ddeef8" stroke-width="1" opacity="0.5" />');
      // Serrated edge
      for (let i = 0; i < 4; i++) {
        parts.push(`<path d="M 10 ${-40 + i * 15} L 15 ${-35 + i * 15} L 10 ${-30 + i * 15}" fill="#99aabb" opacity="0.8" />`);
      }
      // Guard
      parts.push('<path d="M -25 30 L 25 30 L 20 38 L -20 38 Z" fill="#334433" opacity="0.95" />');
      // Handle wrapped in leather
      parts.push('<rect x="-6" y="38" width="12" height="45" rx="2" fill="#224422" opacity="0.95" />');
      parts.push('<rect x="-5" y="40" width="10" height="41" fill="#336633" opacity="0.85" />');
      // Crosshatch wrapping
      for (let i = 0; i < 6; i++) {
        parts.push(`<line x1="-5" y1="${42 + i * 7}" x2="5" y2="${46 + i * 7}" stroke="#113311" stroke-width="2" opacity="0.6" />`);
        parts.push(`<line x1="5" y1="${42 + i * 7}" x2="-5" y2="${46 + i * 7}" stroke="#113311" stroke-width="2" opacity="0.6" />`);
      }
      // Motion lines
      parts.push(...motionLines(25, -30, -60, 4, 40, '#44ff66'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -30, y: -75, w: 60, h: 160 },
        ['#33aa55', '#228844', '#44bb66'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'strike_defect',
    name: 'Strike (Defect)',
    character: 'defect',
    description: 'Deal 6 damage',
    buildParts: () => {
      const parts = [];
      // Energy blade
      parts.push('<path d="M 0 -80 L 18 30 L 0 40 L -18 30 Z" fill="#3366aa" opacity="0.95" />');
      parts.push('<path d="M 0 -70 L 14 25 L 0 33 L -14 25 Z" fill="#4488cc" opacity="0.9" />');
      parts.push('<path d="M 0 -60 L 10 20 L 0 26 L -10 20 Z" fill="#66aaee" opacity="0.85" />');
      parts.push('<path d="M 0 -50 L 6 15 L 0 19 L -6 15 Z" fill="#88ccff" opacity="0.8" />');
      // Energy core glow
      parts.push('<ellipse cx="0" cy="-30" rx="20" ry="40" fill="#4488ff" opacity="0.3" />');
      // Tech handle
      parts.push('<rect x="-10" y="40" width="20" height="45" rx="4" fill="#334455" opacity="0.95" />');
      parts.push('<rect x="-8" y="42" width="16" height="41" fill="#445566" opacity="0.9" />');
      // Circuit lines
      parts.push('<path d="M -5 50 L -5 60 L 5 60 L 5 70" stroke="#66aaff" stroke-width="2" fill="none" opacity="0.7" />');
      parts.push('<path d="M 0 45 L 0 75" stroke="#66aaff" stroke-width="1" fill="none" opacity="0.5" />');
      // Power indicator
      parts.push('<ellipse cx="0" cy="80" rx="6" ry="4" fill="#4488ff" opacity="0.8" />');
      // Sparks
      parts.push(...sparkles(0, -40, 10, 35, '#88ccff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -25, y: -80, w: 50, h: 165 },
        ['#4488cc', '#3366aa', '#5599dd'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'strike_watcher',
    name: 'Strike (Watcher)',
    character: 'watcher',
    description: 'Deal 6 damage',
    buildParts: () => {
      const parts = [];
      // Monk staff with blade
      parts.push('<rect x="-6" y="-70" width="12" height="160" rx="3" fill="#664433" opacity="0.95" />');
      parts.push('<rect x="-4" y="-68" width="8" height="156" fill="#775544" opacity="0.9" />');
      // Staff rings
      for (let i = 0; i < 3; i++) {
        parts.push(`<ellipse cx="0" cy="${-50 + i * 40}" rx="8" ry="4" fill="#aa8866" opacity="0.9" />`);
      }
      // Spirit blade on top
      parts.push('<path d="M 0 -100 L 12 -70 L 0 -65 L -12 -70 Z" fill="#aa44aa" opacity="0.9" />');
      parts.push('<path d="M 0 -95 L 8 -72 L 0 -68 L -8 -72 Z" fill="#dd66dd" opacity="0.85" />');
      parts.push('<ellipse cx="0" cy="-80" rx="15" ry="25" fill="#dd66dd" opacity="0.2" />');
      // Talisman at center
      parts.push('<ellipse cx="0" cy="10" rx="12" ry="12" fill="#aa44aa" opacity="0.9" />');
      parts.push('<ellipse cx="0" cy="10" rx="8" ry="8" fill="#dd66dd" opacity="0.8" />');
      parts.push('<path d="M -4 10 L 4 10 M 0 6 L 0 14" stroke="#ffaaff" stroke-width="2" opacity="0.8" />');
      // Motion lines
      parts.push(...motionLines(-25, -40, -50, 4, 35, '#dd66dd'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -20, y: -100, w: 40, h: 190 },
        ['#aa44aa', '#884488', '#cc66cc'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  // === DEFEND VARIANTS ===
  {
    id: 'defend',
    name: 'Defend',
    character: 'ironclad',
    description: 'Gain 5 Block',
    buildParts: () => {
      const parts = [];
      // Shield shape
      parts.push('<path d="M 0 -70 L 55 -50 L 55 20 Q 55 70 0 90 Q -55 70 -55 20 L -55 -50 Z" fill="#553322" opacity="0.95" />');
      parts.push('<path d="M 0 -62 L 48 -44 L 48 18 Q 48 62 0 80 Q -48 62 -48 18 L -48 -44 Z" fill="#664433" opacity="0.9" />');
      // Shield border
      parts.push('<path d="M 0 -55 L 42 -38 L 42 15 Q 42 55 0 72 Q -42 55 -42 15 L -42 -38 Z" fill="none" stroke="#aa6633" stroke-width="4" opacity="0.8" />');
      // Iron cross emblem
      parts.push('<path d="M 0 -25 L 15 -10 L 15 5 L 0 20 L -15 5 L -15 -10 Z" fill="#aa2222" opacity="0.9" />');
      parts.push('<path d="M -8 5 L -20 5 L -20 -5 L -8 -5 Z" fill="#aa2222" opacity="0.9" />');
      parts.push('<path d="M 8 5 L 20 5 L 20 -5 L 8 -5 Z" fill="#aa2222" opacity="0.9" />');
      // Rivets
      for (let i = 0; i < 6; i++) {
        const angle = (i / 6) * Math.PI * 2 - Math.PI/2;
        const x = Math.cos(angle) * 35;
        const y = Math.sin(angle) * 35 + 10;
        parts.push(`<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="4" fill="#aa8844" opacity="0.9" />`);
      }
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -70, w: 110, h: 165 },
        ['#775544', '#664433', '#886655'], [0.08, 0.22], [1, 4]));
      return parts;
    }
  },
  {
    id: 'defend_silent',
    name: 'Defend (Silent)',
    character: 'silent',
    description: 'Gain 5 Block',
    buildParts: () => {
      const parts = [];
      // Cloak/cape defense
      parts.push('<path d="M -60 -50 Q -70 0 -50 50 Q -30 80 0 85 Q 30 80 50 50 Q 70 0 60 -50 Q 30 -60 0 -55 Q -30 -60 -60 -50" fill="#1a2a1a" opacity="0.95" />');
      parts.push('<path d="M -55 -45 Q -65 0 -45 48 Q -27 75 0 80 Q 27 75 45 48 Q 65 0 55 -45 Q 27 -55 0 -50 Q -27 -55 -55 -45" fill="#2a3a2a" opacity="0.9" />');
      // Cloak folds
      parts.push('<path d="M -40 -30 Q -50 10 -35 45" stroke="#112211" stroke-width="3" fill="none" opacity="0.5" />');
      parts.push('<path d="M 40 -30 Q 50 10 35 45" stroke="#112211" stroke-width="3" fill="none" opacity="0.5" />');
      parts.push('<path d="M 0 -40 Q 5 10 0 60" stroke="#112211" stroke-width="2" fill="none" opacity="0.4" />');
      // Hood
      parts.push('<ellipse cx="0" cy="-50" rx="40" ry="25" fill="#1a2a1a" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="-53" rx="35" ry="20" fill="#0a150a" opacity="0.95" />');
      // Shadow eyes
      parts.push('<ellipse cx="-12" cy="-55" rx="4" ry="3" fill="#44aa66" opacity="0.5" />');
      parts.push('<ellipse cx="12" cy="-55" rx="4" ry="3" fill="#44aa66" opacity="0.5" />');
      // Green energy barrier hint
      parts.push('<ellipse cx="0" cy="0" rx="60" ry="65" fill="none" stroke="#44aa66" stroke-width="2" opacity="0.3" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -65, y: -70, w: 130, h: 160 },
        ['#2a4a2a', '#1a3a1a', '#3a5a3a'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'defend_defect',
    name: 'Defend (Defect)',
    character: 'defect',
    description: 'Gain 5 Block',
    buildParts: () => {
      const parts = [];
      // Energy shield hexagon
      parts.push('<path d="M 0 -65 L 56 -32 L 56 32 L 0 65 L -56 32 L -56 -32 Z" fill="#223355" opacity="0.95" />');
      parts.push('<path d="M 0 -55 L 48 -28 L 48 28 L 0 55 L -48 28 L -48 -28 Z" fill="#334466" opacity="0.9" />');
      // Inner hexagon
      parts.push('<path d="M 0 -40 L 35 -20 L 35 20 L 0 40 L -35 20 L -35 -20 Z" fill="none" stroke="#4488ff" stroke-width="3" opacity="0.6" />');
      // Circuit patterns
      parts.push('<path d="M 0 -40 L 0 -20 L 20 -10 L 20 10 L 0 20" stroke="#66aaff" stroke-width="2" fill="none" opacity="0.7" />');
      parts.push('<path d="M 0 -40 L 0 -20 L -20 -10 L -20 10 L 0 20" stroke="#66aaff" stroke-width="2" fill="none" opacity="0.7" />');
      // Power nodes at corners
      const angles = [0, 60, 120, 180, 240, 300];
      angles.forEach(a => {
        const rad = a * Math.PI / 180 - Math.PI/2;
        const x = Math.cos(rad) * 48;
        const y = Math.sin(rad) * 48;
        parts.push(`<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="6" fill="#4488ff" opacity="0.8" />`);
        parts.push(`<circle cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" r="3" fill="#88ccff" opacity="0.9" />`);
      });
      // Central core
      parts.push('<ellipse cx="0" cy="0" rx="15" ry="15" fill="#4488ff" opacity="0.5" />');
      parts.push('<ellipse cx="0" cy="0" rx="8" ry="8" fill="#88ccff" opacity="0.7" />');
      // Energy glow
      parts.push('<path d="M 0 -65 L 56 -32 L 56 32 L 0 65 L -56 32 L -56 -32 Z" fill="#4488ff" opacity="0.1" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -60, y: -70, w: 120, h: 140 },
        ['#4477aa', '#335588', '#5588bb'], [0.06, 0.18], [1, 3]));
      return parts;
    }
  },
  {
    id: 'defend_watcher',
    name: 'Defend (Watcher)',
    character: 'watcher',
    description: 'Gain 5 Block',
    buildParts: () => {
      const parts = [];
      // Meditative barrier - lotus-like shape
      parts.push('<path d="M 0 -60 Q 40 -40 50 0 Q 40 40 0 60 Q -40 40 -50 0 Q -40 -40 0 -60" fill="#442244" opacity="0.95" />');
      parts.push('<path d="M 0 -50 Q 35 -32 42 0 Q 35 32 0 50 Q -35 32 -42 0 Q -35 -32 0 -50" fill="#553355" opacity="0.9" />');
      // Inner lotus petals
      for (let i = 0; i < 8; i++) {
        const angle = (i / 8) * Math.PI * 2 - Math.PI/2;
        const x = Math.cos(angle) * 25;
        const y = Math.sin(angle) * 25;
        parts.push(`<ellipse cx="${x.toFixed(1)}" cy="${y.toFixed(1)}" rx="12" ry="20" fill="#aa66aa" opacity="0.4" transform="rotate(${45 * i}, ${x.toFixed(1)}, ${y.toFixed(1)})" />`);
      }
      // Central peace symbol
      parts.push('<circle cx="0" cy="0" r="18" fill="none" stroke="#dd88dd" stroke-width="2" opacity="0.8" />');
      parts.push('<path d="M 0 -18 L 0 18 M -15 -8 L 0 0 L -15 8" stroke="#dd88dd" stroke-width="2" fill="none" opacity="0.8" />');
      // Calm aura
      parts.push('<ellipse cx="0" cy="0" rx="55" ry="55" fill="none" stroke="#aa66aa" stroke-width="1" opacity="0.4" />');
      parts.push('<ellipse cx="0" cy="0" rx="65" ry="65" fill="none" stroke="#8844aa" stroke-width="1" opacity="0.3" />');
      // Sparkles
      parts.push(...sparkles(0, 0, 12, 50, '#ffaaff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -65, w: 110, h: 130 },
        ['#aa66aa', '#884488', '#cc88cc'], [0.06, 0.18], [1, 3]));
      return parts;
    }
  },
  // === CHARACTER STARTER CARDS ===
  {
    id: 'bash',
    name: 'Bash',
    character: 'ironclad',
    description: 'Deal 8 damage, Apply Vulnerable 2',
    buildParts: () => {
      const parts = [];
      // Heavy fist/gauntlet
      parts.push('<path d="M -40 -20 Q -45 10 -35 40 L 35 40 Q 45 10 40 -20 L 40 -50 Q 30 -60 0 -60 Q -30 -60 -40 -50 Z" fill="#553333" opacity="0.95" />');
      parts.push('<path d="M -35 -18 Q -40 10 -30 35 L 30 35 Q 40 10 35 -18 L 35 -45 Q 27 -53 0 -53 Q -27 -53 -35 -45 Z" fill="#664444" opacity="0.9" />');
      // Knuckle plates
      for (let i = 0; i < 4; i++) {
        const x = -22 + i * 15;
        parts.push(`<rect x="${x}" y="-55" width="12" height="20" rx="3" fill="#888888" opacity="0.9" />`);
        parts.push(`<rect x="${x + 1}" y="-53" width="10" height="16" fill="#999999" opacity="0.8" />`);
      }
      // Spikes on knuckles
      for (let i = 0; i < 4; i++) {
        const x = -16 + i * 15;
        parts.push(`<path d="M ${x} -55 L ${x + 3} -70 L ${x + 6} -55" fill="#aa2222" opacity="0.9" />`);
      }
      // Impact lines
      parts.push(...motionLines(50, -30, 135, 6, 45, '#ff4444'));
      // Cracks/damage effect
      parts.push('<path d="M 45 -45 L 55 -35 L 50 -25 L 60 -15" stroke="#ff4444" stroke-width="3" fill="none" opacity="0.7" />');
      // Vulnerable icon hint
      parts.push('<circle cx="55" cy="25" r="12" fill="#aa2222" opacity="0.7" />');
      parts.push('<path d="M 50 25 L 55 30 L 60 20" stroke="#ffffff" stroke-width="2" fill="none" opacity="0.8" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -50, y: -70, w: 100, h: 120 },
        ['#664444', '#553333', '#775555'], [0.1, 0.25], [1, 4]));
      return parts;
    }
  },
  {
    id: 'neutralize',
    name: 'Neutralize',
    character: 'silent',
    description: 'Deal 3 damage, Apply Weak 1',
    buildParts: () => {
      const parts = [];
      // Throwing knife
      parts.push('<path d="M 0 -80 L 8 -30 L 0 -20 L -8 -30 Z" fill="#889999" opacity="0.95" />');
      parts.push('<path d="M 0 -75 L 5 -32 L 0 -25 L -5 -32 Z" fill="#aabbbb" opacity="0.9" />');
      // Poison coating on blade
      parts.push('<path d="M 0 -70 L 4 -35" stroke="#66aa44" stroke-width="3" opacity="0.7" />');
      parts.push('<path d="M -3 -60 L 3 -50" stroke="#66aa44" stroke-width="2" opacity="0.6" />');
      // Handle
      parts.push('<rect x="-5" y="-20" width="10" height="30" rx="2" fill="#333333" opacity="0.95" />');
      parts.push('<rect x="-4" y="-18" width="8" height="26" fill="#444444" opacity="0.9" />');
      // Poison drops falling
      parts.push('<ellipse cx="15" cy="-50" rx="4" ry="6" fill="#66aa44" opacity="0.8" />');
      parts.push('<ellipse cx="20" cy="-35" rx="3" ry="5" fill="#66aa44" opacity="0.7" />');
      parts.push('<ellipse cx="12" cy="-25" rx="3" ry="4" fill="#66aa44" opacity="0.6" />');
      // Weak debuff icon
      parts.push('<circle cx="-30" cy="20" r="18" fill="#225522" opacity="0.8" />');
      parts.push('<path d="M -38 20 Q -30 28 -22 20" stroke="#66aa44" stroke-width="3" fill="none" opacity="0.9" />');
      parts.push('<circle cx="-35" cy="15" r="3" fill="#66aa44" opacity="0.8" />');
      parts.push('<circle cx="-25" cy="15" r="3" fill="#66aa44" opacity="0.8" />');
      // Motion trail
      parts.push(...motionLines(-15, -50, -120, 4, 35, '#66aa44'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -45, y: -85, w: 90, h: 130 },
        ['#44aa66', '#338855', '#55bb77'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'survivor',
    name: 'Survivor',
    character: 'silent',
    description: 'Gain 8 Block, Discard 1',
    buildParts: () => {
      const parts = [];
      // Dodging figure silhouette
      parts.push('<path d="M 0 -60 Q -10 -50 -15 -30 Q -20 -10 -10 10 L -5 40 Q -15 50 -20 70 L 20 70 Q 15 50 5 40 L 10 10 Q 20 -10 15 -30 Q 10 -50 0 -60" fill="#1a2a1a" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="-65" rx="12" ry="14" fill="#1a2a1a" opacity="0.95" />');
      // Motion blur/dodge effect
      parts.push('<path d="M 35 -40 Q 45 0 35 40" stroke="#44aa66" stroke-width="8" fill="none" opacity="0.3" />');
      parts.push('<path d="M 40 -35 Q 50 0 40 35" stroke="#44aa66" stroke-width="6" fill="none" opacity="0.25" />');
      parts.push('<path d="M 45 -30 Q 55 0 45 30" stroke="#44aa66" stroke-width="4" fill="none" opacity="0.2" />');
      // Block shield aura
      parts.push('<ellipse cx="-25" cy="0" rx="30" ry="45" fill="none" stroke="#44aa66" stroke-width="3" opacity="0.5" />');
      // Discard card falling away
      parts.push('<rect x="30" y="30" width="25" height="35" rx="3" fill="#333333" transform="rotate(20, 42, 47)" opacity="0.7" />');
      parts.push('<path d="M 40 55 L 55 70" stroke="#333333" stroke-width="2" stroke-dasharray="4,2" opacity="0.5" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -45, y: -80, w: 100, h: 160 },
        ['#2a4a2a', '#1a3a1a', '#3a5a3a'], [0.08, 0.22], [1, 3]));
      return parts;
    }
  },
  {
    id: 'zap',
    name: 'Zap',
    character: 'defect',
    description: 'Channel 1 Lightning',
    buildParts: () => {
      const parts = [];
      // Lightning orb
      parts.push('<ellipse cx="0" cy="0" rx="50" ry="50" fill="#223355" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="0" rx="42" ry="42" fill="#334466" opacity="0.9" />');
      parts.push('<ellipse cx="0" cy="0" rx="34" ry="34" fill="#4455aa" opacity="0.85" />');
      // Electric arcs inside orb
      parts.push('<path d="M 0 -30 L 10 -10 L -5 0 L 15 20 L 0 30" stroke="#ffff44" stroke-width="4" fill="none" opacity="0.9" />');
      parts.push('<path d="M -20 -15 L -5 5 L -15 10" stroke="#ffff44" stroke-width="3" fill="none" opacity="0.8" />');
      parts.push('<path d="M 20 -10 L 10 8" stroke="#ffff44" stroke-width="3" fill="none" opacity="0.7" />');
      // Outer lightning bolts
      parts.push('<path d="M -45 -35 L -55 -30 L -45 -20 L -60 -15" stroke="#88aaff" stroke-width="3" fill="none" opacity="0.7" />');
      parts.push('<path d="M 45 30 L 55 35 L 48 45 L 60 50" stroke="#88aaff" stroke-width="3" fill="none" opacity="0.7" />');
      // Core glow
      parts.push('<ellipse cx="0" cy="0" rx="20" ry="20" fill="#ffff88" opacity="0.4" />');
      parts.push('<ellipse cx="0" cy="-5" rx="10" ry="12" fill="#ffffff" opacity="0.3" />');
      // Electric field
      parts.push(...sparkles(0, 0, 15, 55, '#88aaff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -55, w: 110, h: 110 },
        ['#4466aa', '#3355aa', '#5577cc'], [0.1, 0.25], [1, 3]));
      return parts;
    }
  },
  {
    id: 'dualcast',
    name: 'Dualcast',
    character: 'defect',
    description: 'Evoke rightmost Orb twice',
    buildParts: () => {
      const parts = [];
      // Two overlapping orbs
      parts.push('<ellipse cx="-20" cy="0" rx="38" ry="38" fill="#223355" opacity="0.95" />');
      parts.push('<ellipse cx="-20" cy="0" rx="30" ry="30" fill="#334466" opacity="0.9" />');
      parts.push('<ellipse cx="20" cy="0" rx="38" ry="38" fill="#223355" opacity="0.85" />');
      parts.push('<ellipse cx="20" cy="0" rx="30" ry="30" fill="#334466" opacity="0.8" />');
      // X2 multiplier in center
      parts.push('<text x="0" y="8" font-family="Arial" font-size="32" font-weight="bold" fill="#ffff44" text-anchor="middle" opacity="0.9">×2</text>');
      // Energy connecting the orbs
      parts.push('<path d="M -10 -15 Q 0 -25 10 -15" stroke="#88aaff" stroke-width="3" fill="none" opacity="0.7" />');
      parts.push('<path d="M -10 15 Q 0 25 10 15" stroke="#88aaff" stroke-width="3" fill="none" opacity="0.7" />');
      // Evoke effect arrows
      parts.push('<path d="M -50 0 L -60 -10 L -60 10 Z" fill="#88aaff" opacity="0.7" />');
      parts.push('<path d="M 50 0 L 60 -10 L 60 10 Z" fill="#88aaff" opacity="0.7" />');
      // Energy burst
      parts.push(...sparkles(0, 0, 12, 50, '#88ccff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -60, y: -45, w: 120, h: 90 },
        ['#4477cc', '#3366bb', '#5588dd'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'eruption',
    name: 'Eruption',
    character: 'watcher',
    description: 'Deal 9 damage, Enter Wrath',
    buildParts: () => {
      const parts = [];
      // Volcano/eruption base
      parts.push('<path d="M -50 60 L -30 0 L 0 -50 L 30 0 L 50 60 Z" fill="#553322" opacity="0.95" />');
      parts.push('<path d="M -45 58 L -27 5 L 0 -42 L 27 5 L 45 58 Z" fill="#664433" opacity="0.9" />');
      // Lava/fire erupting
      parts.push('<path d="M 0 -50 Q -20 -70 -15 -80 Q 0 -95 15 -80 Q 20 -70 0 -50" fill="#ff4400" opacity="0.9" />');
      parts.push('<path d="M 0 -55 Q -15 -72 -10 -78 Q 0 -88 10 -78 Q 15 -72 0 -55" fill="#ff6622" opacity="0.85" />');
      parts.push('<path d="M 0 -60 Q -8 -75 -5 -80 Q 0 -85 5 -80 Q 8 -75 0 -60" fill="#ffaa44" opacity="0.8" />');
      // Fire particles
      parts.push(...sparkles(0, -70, 10, 30, '#ffaa44'));
      // Wrath aura - red glow
      parts.push('<ellipse cx="0" cy="-30" rx="65" ry="75" fill="#ff2200" opacity="0.2" />');
      parts.push('<ellipse cx="0" cy="-40" rx="45" ry="55" fill="#ff4400" opacity="0.15" />');
      // Cracks in volcano
      parts.push('<path d="M -20 30 L -25 15 L -15 5" stroke="#ff4400" stroke-width="3" fill="none" opacity="0.6" />');
      parts.push('<path d="M 15 35 L 20 20 L 12 10" stroke="#ff4400" stroke-width="3" fill="none" opacity="0.6" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -90, w: 110, h: 155 },
        ['#aa4422', '#884422', '#cc5533'], [0.1, 0.25], [1, 4]));
      return parts;
    }
  },
  {
    id: 'vigilance',
    name: 'Vigilance',
    character: 'watcher',
    description: 'Gain 8 Block, Enter Calm',
    buildParts: () => {
      const parts = [];
      // Serene meditation pose silhouette
      parts.push('<ellipse cx="0" cy="30" rx="45" ry="25" fill="#224466" opacity="0.95" />');
      parts.push('<path d="M 0 -40 Q -20 -20 -25 10 Q -30 30 -20 40 L 20 40 Q 30 30 25 10 Q 20 -20 0 -40" fill="#224466" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="-45" rx="15" ry="18" fill="#224466" opacity="0.95" />');
      // Third eye glow
      parts.push('<ellipse cx="0" cy="-50" rx="5" ry="4" fill="#88ccff" opacity="0.8" />');
      parts.push('<ellipse cx="0" cy="-50" rx="12" ry="10" fill="#88ccff" opacity="0.2" />');
      // Calm aura rings
      parts.push('<ellipse cx="0" cy="0" rx="55" ry="55" fill="none" stroke="#4488cc" stroke-width="2" opacity="0.4" />');
      parts.push('<ellipse cx="0" cy="0" rx="65" ry="65" fill="none" stroke="#3377bb" stroke-width="1.5" opacity="0.3" />');
      parts.push('<ellipse cx="0" cy="0" rx="75" ry="75" fill="none" stroke="#2266aa" stroke-width="1" opacity="0.2" />');
      // Calm energy wisps
      parts.push('<path d="M -50 20 Q -55 0 -45 -20" stroke="#88ccff" stroke-width="2" fill="none" opacity="0.5" />');
      parts.push('<path d="M 50 20 Q 55 0 45 -20" stroke="#88ccff" stroke-width="2" fill="none" opacity="0.5" />');
      // Block shield hint
      parts.push('<ellipse cx="0" cy="0" rx="50" ry="60" fill="#4488cc" opacity="0.1" />');
      // Sparkles
      parts.push(...sparkles(0, -20, 10, 60, '#aaddff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -60, y: -70, w: 120, h: 130 },
        ['#3366aa', '#224488', '#4477bb'], [0.06, 0.18], [1, 3]));
      return parts;
    }
  },
  // === TOKEN CARDS ===
  {
    id: 'shiv',
    name: 'Shiv',
    character: 'silent',
    description: 'Deal 4 damage, Exhaust',
    buildParts: () => {
      const parts = [];
      // Shiv blade - small throwing knife
      parts.push('<path d="M 0 -65 L 10 10 L 0 20 L -10 10 Z" fill="#889999" opacity="0.95" />');
      parts.push('<path d="M 0 -58 L 7 8 L 0 15 L -7 8 Z" fill="#aabbbb" opacity="0.9" />');
      // Edge gleam
      parts.push('<path d="M 0 -55 L 0 10" stroke="#ddeeff" stroke-width="1" opacity="0.6" />');
      // Multiple shivs in motion
      parts.push('<path d="M -35 -45 L -28 0 L -35 8 L -42 0 Z" fill="#778888" opacity="0.6" transform="rotate(-15, -35, -20)" />');
      parts.push('<path d="M 35 -40 L 42 5 L 35 13 L 28 5 Z" fill="#778888" opacity="0.5" transform="rotate(20, 35, -15)" />');
      // Motion trails
      parts.push(...motionLines(-10, -30, -60, 4, 40, '#44ff66'));
      parts.push(...motionLines(15, -25, -120, 4, 40, '#44ff66'));
      // Exhaust smoke
      parts.push('<ellipse cx="0" cy="50" rx="30" ry="15" fill="#333333" opacity="0.4" />');
      parts.push('<path d="M -15 45 Q -20 35 -10 30" stroke="#444444" stroke-width="3" fill="none" opacity="0.4" />');
      parts.push('<path d="M 15 45 Q 20 35 10 30" stroke="#444444" stroke-width="3" fill="none" opacity="0.4" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -50, y: -70, w: 100, h: 130 },
        ['#33aa55', '#228844', '#44bb66'], [0.08, 0.2], [1, 3]));
      return parts;
    }
  },
  {
    id: 'miracle',
    name: 'Miracle',
    character: 'watcher',
    description: 'Gain 1 Energy, Exhaust',
    buildParts: () => {
      const parts = [];
      // Divine light ray
      parts.push('<path d="M 0 -80 L 50 80 L -50 80 Z" fill="#ffee88" opacity="0.3" />');
      parts.push('<path d="M 0 -70 L 35 75 L -35 75 Z" fill="#ffff99" opacity="0.3" />');
      parts.push('<path d="M 0 -60 L 20 70 L -20 70 Z" fill="#ffffaa" opacity="0.3" />');
      // Water droplet (Watcher's miracle is water)
      parts.push('<path d="M 0 -30 Q 25 5 20 25 Q 15 45 0 50 Q -15 45 -20 25 Q -25 5 0 -30" fill="#4488cc" opacity="0.9" />');
      parts.push('<path d="M 0 -22 Q 18 3 14 20 Q 10 36 0 40 Q -10 36 -14 20 Q -18 3 0 -22" fill="#66aaee" opacity="0.85" />');
      parts.push('<path d="M 0 -15 Q 12 2 9 15 Q 6 26 0 30 Q -6 26 -9 15 Q -12 2 0 -15" fill="#88ccff" opacity="0.8" />');
      // Highlight
      parts.push('<ellipse cx="-6" cy="-5" rx="5" ry="8" fill="#aaeeff" opacity="0.6" />');
      // Energy symbol (+1)
      parts.push('<circle cx="0" cy="70" r="15" fill="#ffcc44" opacity="0.9" />');
      parts.push('<path d="M 0 62 L 0 78 M -8 70 L 8 70" stroke="#ffffff" stroke-width="3" opacity="0.9" />');
      // Divine sparkles
      parts.push(...sparkles(0, -10, 15, 60, '#ffff88'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -80, w: 110, h: 165 },
        ['#aa88cc', '#8866aa', '#cc99ee'], [0.06, 0.15], [1, 3]));
      return parts;
    }
  },
  // === COMMON CARDS ===
  {
    id: 'anger',
    name: 'Anger',
    character: 'ironclad',
    description: 'Deal 6 damage, Add copy to discard',
    buildParts: () => {
      const parts = [];
      // Angry face/mask
      parts.push('<ellipse cx="0" cy="0" rx="55" ry="50" fill="#553333" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="3" rx="50" ry="45" fill="#664444" opacity="0.9" />');
      // Angry eyes (slanted down)
      parts.push('<path d="M -35 -15 L -15 -5" stroke="#aa2222" stroke-width="8" stroke-linecap="round" opacity="0.9" />');
      parts.push('<path d="M 35 -15 L 15 -5" stroke="#aa2222" stroke-width="8" stroke-linecap="round" opacity="0.9" />');
      parts.push('<ellipse cx="-25" cy="-8" rx="6" ry="6" fill="#ff4444" opacity="0.9" />');
      parts.push('<ellipse cx="25" cy="-8" rx="6" ry="6" fill="#ff4444" opacity="0.9" />');
      // Angry mouth
      parts.push('<path d="M -25 25 Q 0 40 25 25 Q 0 35 -25 25" fill="#aa2222" opacity="0.9" />');
      // Rage flames on top
      parts.push('<path d="M -20 -55 Q -25 -65 -15 -75 Q -10 -65 -20 -55" fill="#ff4400" opacity="0.8" />');
      parts.push('<path d="M 0 -50 Q -5 -65 5 -80 Q 15 -65 0 -50" fill="#ff6622" opacity="0.85" />');
      parts.push('<path d="M 20 -55 Q 25 -65 15 -75 Q 10 -65 20 -55" fill="#ff4400" opacity="0.8" />');
      // Copy card floating away
      parts.push('<rect x="35" y="30" width="20" height="28" rx="2" fill="#aa2222" transform="rotate(15, 45, 44)" opacity="0.6" />');
      parts.push('<rect x="45" y="40" width="20" height="28" rx="2" fill="#aa2222" transform="rotate(25, 55, 54)" opacity="0.4" />');
      // Rage aura
      parts.push('<ellipse cx="0" cy="0" rx="65" ry="60" fill="#ff2200" opacity="0.15" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -60, y: -80, w: 120, h: 130 },
        ['#aa3333', '#882222', '#cc4444'], [0.1, 0.25], [1, 4]));
      return parts;
    }
  },
  {
    id: 'pommelStrike',
    name: 'Pommel Strike',
    character: 'ironclad',
    description: 'Deal 9 damage, Draw 1',
    buildParts: () => {
      const parts = [];
      // Sword pommel/handle end striking
      parts.push('<rect x="-12" y="-50" width="24" height="60" rx="4" fill="#664433" opacity="0.95" />');
      parts.push('<rect x="-10" y="-48" width="20" height="56" fill="#775544" opacity="0.9" />');
      // Pommel at bottom (striking point)
      parts.push('<ellipse cx="0" cy="15" rx="22" ry="15" fill="#aa8844" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="13" rx="18" ry="12" fill="#ccaa66" opacity="0.9" />');
      // Gem in pommel
      parts.push('<ellipse cx="0" cy="13" rx="8" ry="6" fill="#aa2222" opacity="0.9" />');
      parts.push('<ellipse cx="-2" cy="11" rx="3" ry="2" fill="#ff4444" opacity="0.6" />');
      // Guard hint at top
      parts.push('<ellipse cx="0" cy="-50" rx="30" ry="6" fill="#888888" opacity="0.9" />');
      // Impact effect
      parts.push(...motionLines(0, 40, 90, 6, 50, '#ffaa44'));
      // Stun stars (draw card effect hint)
      parts.push('<path d="M 40 -20 L 45 -15 L 50 -20 L 45 -25 Z" fill="#ffff44" opacity="0.7" />');
      parts.push('<path d="M 50 -5 L 54 0 L 50 5 L 46 0 Z" fill="#ffff44" opacity="0.6" />');
      // Card being drawn
      parts.push('<rect x="-50" y="30" width="18" height="25" rx="2" fill="#aa2222" transform="rotate(-10, -41, 42)" opacity="0.7" />');
      parts.push('<path d="M -55 55 L -45 35" stroke="#aa2222" stroke-width="2" stroke-dasharray="3,2" opacity="0.5" />');
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -60, w: 110, h: 130 },
        ['#775544', '#664433', '#886655'], [0.1, 0.25], [1, 4]));
      return parts;
    }
  },
  {
    id: 'ballLightning',
    name: 'Ball Lightning',
    character: 'defect',
    description: 'Deal 7 damage, Channel 1 Lightning',
    buildParts: () => {
      const parts = [];
      // Large lightning ball
      parts.push('<ellipse cx="0" cy="-20" rx="50" ry="50" fill="#223355" opacity="0.95" />');
      parts.push('<ellipse cx="0" cy="-20" rx="42" ry="42" fill="#334477" opacity="0.9" />');
      parts.push('<ellipse cx="0" cy="-20" rx="32" ry="32" fill="#4455aa" opacity="0.85" />');
      // Lightning crackling inside
      parts.push('<path d="M 0 -50 L 12 -25 L -8 -20 L 15 5" stroke="#ffff44" stroke-width="4" fill="none" opacity="0.9" />');
      parts.push('<path d="M -25 -35 L -10 -25 L -20 -15" stroke="#ffff44" stroke-width="3" fill="none" opacity="0.8" />');
      parts.push('<path d="M 20 -40 L 10 -30 L 22 -20" stroke="#ffff44" stroke-width="3" fill="none" opacity="0.8" />');
      // Core glow
      parts.push('<ellipse cx="0" cy="-20" rx="20" ry="20" fill="#ffff88" opacity="0.4" />');
      parts.push('<ellipse cx="0" cy="-25" rx="10" ry="12" fill="#ffffff" opacity="0.3" />');
      // Ball flying motion
      parts.push(...motionLines(-40, 0, -150, 5, 50, '#88aaff'));
      // Small orb being channeled below
      parts.push('<ellipse cx="0" cy="55" rx="20" ry="20" fill="#334466" opacity="0.8" />');
      parts.push('<ellipse cx="0" cy="55" rx="14" ry="14" fill="#4466aa" opacity="0.7" />');
      parts.push('<path d="M 0 48 L 5 55 L -3 58 L 5 62" stroke="#ffff44" stroke-width="2" fill="none" opacity="0.8" />');
      // Channel energy line
      parts.push('<path d="M 0 30 Q 10 40 0 45" stroke="#66aaff" stroke-width="3" fill="none" opacity="0.5" />');
      // Electric field
      parts.push(...sparkles(0, -20, 12, 55, '#88aaff'));
      // Texture
      parts.push(...noisePattern(NOISE_DENSITY, { x: -55, y: -75, w: 110, h: 150 },
        ['#4477cc', '#3366bb', '#5588dd'], [0.1, 0.25], [1, 3]));
      return parts;
    }
  }
];

async function generateHighPriorityCardArt() {
  const sharp = (await import('sharp')).default;
  const outDir = path.join(__dirname, '..', 'src', 'assets', 'art', 'cards');

  console.log('\n=== VP-05: High-Priority Card Art ===\n');
  console.log('Target: >10KB per card with detailed art\n');

  const results = {
    ironclad: [],
    silent: [],
    defect: [],
    watcher: [],
    neutral: []
  };

  for (const card of CARDS) {
    const parts = card.buildParts();
    const c = CHAR_COLORS[card.character];

    const svg = `<svg width="${SIZE}" height="${SIZE}" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="bg" cx="50%" cy="45%" r="75%">
      <stop offset="0%" stop-color="${c.dark}" />
      <stop offset="100%" stop-color="${c.darker}" />
    </radialGradient>
    <radialGradient id="glow" cx="50%" cy="45%" r="60%">
      <stop offset="0%" stop-color="${c.accent}" stop-opacity="0.15" />
      <stop offset="100%" stop-color="${c.accent}" stop-opacity="0" />
    </radialGradient>
    <radialGradient id="vignette" cx="50%" cy="50%" r="50%">
      <stop offset="40%" stop-color="black" stop-opacity="0" />
      <stop offset="100%" stop-color="black" stop-opacity="0.5" />
    </radialGradient>
  </defs>
  <rect width="${SIZE}" height="${SIZE}" fill="url(#bg)" />
  <rect width="${SIZE}" height="${SIZE}" fill="url(#glow)" />
  <g transform="translate(256, 256)">
    ${parts.join('\n    ')}
  </g>
  <rect width="${SIZE}" height="${SIZE}" fill="url(#vignette)" />
</svg>`;

    const outPath = path.join(outDir, `${card.id}.webp`);

    // Render at high resolution and downscale for quality
    await sharp(Buffer.from(svg))
      .resize(OUTPUT_SIZE, OUTPUT_SIZE, { kernel: 'lanczos3' })
      .webp({ quality: 100, nearLossless: true, effort: 6 })
      .toFile(outPath);

    const stats = fs.statSync(outPath);
    const sizeKB = (stats.size / 1024).toFixed(1);
    const status = stats.size > 10 * 1024 ? '✓' : '✗ (below 10KB)';

    results[card.character].push({
      id: card.id,
      name: card.name,
      sizeKB,
      passed: stats.size > 10 * 1024
    });

    console.log(`  ${card.id}.webp: ${sizeKB}KB ${status}`);
  }

  console.log('\n=== Summary by Character ===\n');

  let totalPassed = 0;
  let totalCards = 0;
  for (const [char, cards] of Object.entries(results)) {
    if (cards.length === 0) continue;
    const passed = cards.filter(c => c.passed).length;
    totalPassed += passed;
    totalCards += cards.length;
    console.log(`${char.charAt(0).toUpperCase() + char.slice(1)}: ${passed}/${cards.length} passed`);
    for (const c of cards) {
      console.log(`  - ${c.name} (${c.id}.webp): ${c.sizeKB}KB`);
    }
  }

  console.log(`\nTotal: ${totalPassed}/${totalCards} cards meet >10KB requirement`);
  console.log('\n=== Generation Complete ===\n');
}

generateHighPriorityCardArt().catch(console.error);
